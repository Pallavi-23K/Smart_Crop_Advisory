<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Crop Advisory</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 30px; background: #f0fff0; }
        h1 { color: green; }
        select { padding: 8px; font-size: 16px; margin-bottom: 20px; }
        input[type="file"] { margin: 20px 0; }
        button { padding: 10px 20px; font-size: 16px; background: green; color: white; border: none; cursor: pointer; border-radius: 5px; }
        button:hover { background: darkgreen; }
        #result { margin-top: 20px; font-size: 18px; color: #004400; font-weight: bold; }
        img { max-width: 300px; margin-top: 20px; border: 2px solid green; border-radius: 10px; }
    </style>
</head>
<body>
    <h1 id="title">üåæ Smart Crop Advisory</h1>

    <label for="langSelect" id="langLabel">üåê Select Language:</label>
    <select id="langSelect">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
        <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>

    <p id="uploadText">Upload a leaf image to detect plant disease:</p>
    <input type="file" id="fileInput" accept="image/*">
    <br>
    <button id="detectBtn">Detect Disease</button>
    
    <div id="result"></div>
    <img id="preview" src="" alt="Preview Image">

    <script>
        const translations = {
            en: {
                title: "üåæ Smart Crop Advisory",
                langLabel: "üåê Select Language:",
                uploadText: "Upload a leaf image to detect plant disease:",
                detectBtn: "Detect Disease",
                resultText: "üåø Detected Disease: ",
                alertNoFile: "Please select an image!",
                alertError: "Error detecting disease. Make sure backend is running!"
            },
            hi: {
                title: "üåæ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π",
                langLabel: "üåê ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                uploadText: "‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§™‡§§‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§§‡•ç‡§§‡•Ä ‡§ï‡•Ä ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç:",
                detectBtn: "‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§™‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç",
                resultText: "üåø ‡§™‡§§‡§æ ‡§ï‡•Ä ‡§ó‡§à ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä: ",
                alertNoFile: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§õ‡§µ‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç!",
                alertError: "‡§¨‡•Ä‡§Æ‡§æ‡§∞‡•Ä ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à!"
            },
            kn: {
                title: "üåæ ‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç ‡≤ï‡≥É‡≤∑‡≤ø ‡≤∏‡≤≤‡≤π‡≥Ü",
                langLabel: "üåê ‡≤≠‡≤æ‡≤∑‡≥Ü ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø:",
                uploadText: "‡≤Æ‡≤∞‡≤ø‡≤ó‡≤≥ ‡≤∞‡≥ã‡≤ó‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤é‡≤≤‡≥Ü ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤™‡≥ç‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø:",
                detectBtn: "‡≤∞‡≥ã‡≤ó ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø",
                resultText: "üåø ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Ø‡≤æ‡≤¶ ‡≤∞‡≥ã‡≤ó: ",
                alertNoFile: "‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø!",
                alertError: "‡≤∞‡≥ã‡≤ó ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¶‡≥ã‡≤∑. ‡≤¨‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç‚Äå‡≤é‡≤Ç‡≤°‡≥ç ‡≤ö‡≤æ‡≤≤‡≤®‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≤®‡≥ç‡≤®‡≥Å ‡≤ñ‡≤ö‡≤ø‡≤§‡≤™‡≤°‡≤ø‡≤∏‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø!"
            },
            ta: {
                title: "üåæ ‡Æ∏‡Øç‡ÆÆ‡Ææ‡Æ∞‡Øç‡Æü‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà",
                langLabel: "üåê ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:",
                uploadText: "‡Æö‡ØÜ‡Æü‡Æø ‡Æ®‡Øã‡ÆØ‡Øà ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ ‡Æá‡Æ≤‡Øà ‡Æ™‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç:",
                detectBtn: "‡Æ®‡Øã‡ÆØ‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø",
                resultText: "üåø ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ®‡Øã‡ÆØ‡Øç: ",
                alertNoFile: "‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æ™‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç!",
                alertError: "‡Æ®‡Øã‡ÆØ‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ ‡Æ™‡Øä‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø‡ÆØ‡Æü‡Øà‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ. ‡Æ™‡Æø‡Æ©‡Øç‡Æ™‡ØÅ‡Æ±‡ÆÆ‡Øç ‡Æá‡ÆØ‡Æô‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ©‡Øç‡Æ±‡Æ§‡Øà ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç!"
            }
        };

        function translatePage() {
            const lang = document.getElementById("langSelect").value;
            const t = translations[lang];

            document.getElementById("title").innerText = t.title;
            document.getElementById("langLabel").innerText = t.langLabel;
            document.getElementById("uploadText").innerText = t.uploadText;
            document.getElementById("detectBtn").innerText = t.detectBtn;
        }

        document.getElementById("langSelect").addEventListener("change", translatePage);
        translatePage(); // initial translation

        document.getElementById("detectBtn").addEventListener("click", () => {
            const lang = document.getElementById("langSelect").value;
            const t = translations[lang];

            const file = document.getElementById('fileInput').files[0];
            if (!file) { alert(t.alertNoFile); return; }

            const preview = document.getElementById('preview');
            preview.src = URL.createObjectURL(file);

            const formData = new FormData();
            formData.append("file", file);

            fetch("http://localhost:8000/predict/", { method: "POST", body: formData })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result').innerText = t.resultText + data.disease;
                })
                .catch(err => { 
                    console.error(err);
                    alert(t.alertError);
                });
        });
    </script>
</body>
</html>
